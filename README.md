# CN_Language

ä¸€é—¨é¢å‘æ“ä½œç³»ç»Ÿå¼€å‘çš„ä¸­æ–‡ç¼–ç¨‹è¯­è¨€åŠå…¶ç¼–è¯‘å™¨å·¥å…·é“¾å®ç°ã€‚

## é¡¹ç›®ç®€ä»‹

CN_Language æ˜¯ä¸€ä¸ªä½¿ç”¨ä¸­æ–‡å…³é”®å­—å’Œæ ‡è¯†ç¬¦çš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œæ—¨åœ¨ä¸ºæ“ä½œç³»ç»Ÿå¼€å‘ã€åº•å±‚ç³»ç»Ÿè½¯ä»¶å’ŒåµŒå…¥å¼å¼€å‘æä¾›ç°ä»£åŒ–çš„ä¸­æ–‡ç¼–ç¨‹ä½“éªŒã€‚

**æ ¸å¿ƒç‰¹æ€§ï¼š**
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡è¯­æ³•**ï¼šä½¿ç”¨ä¸­æ–‡å…³é”®å­—å’Œæ ‡è¯†ç¬¦ï¼Œè¯­ä¹‰æ¸…æ™°æ˜“æ‡‚
- ğŸ”§ **ç³»ç»Ÿçº§å¼€å‘**ï¼šæ”¯æŒ freestanding æ¨¡å¼ï¼Œé€‚åˆæ“ä½œç³»ç»Ÿå†…æ ¸å’Œè£¸æœºç¼–ç¨‹
- âš¡ **ç¼–è¯‘åˆ° C**ï¼šé¦–æœŸç‰ˆæœ¬é€šè¿‡ç¼–è¯‘åˆ° C è¯­è¨€ï¼Œå¤ç”¨æˆç†Ÿå·¥å…·é“¾
- ğŸ› ï¸ **å®Œæ•´å·¥å…·é“¾**ï¼šåŒ…å«ç¼–è¯‘å™¨ã€REPLã€æ ¼å¼åŒ–å·¥å…·ç­‰å¼€å‘å·¥å…·
- ğŸ“¦ **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„æ¶æ„åˆ†å±‚ï¼Œä¸¥æ ¼çš„ä»£ç è§„èŒƒ

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- C ç¼–è¯‘å™¨ï¼ˆGCC/Clang/MSVCï¼‰
- CMake 3.10+
- Git

### æ„å»ºé¡¹ç›®

```powershell
# å…‹éš†ä»“åº“
git clone https://github.com/ChenChao-HuaiAn/CN_Language.git
cd CN_Language

# åˆ›å»ºæ„å»ºç›®å½•
mkdir build
cd build

# é…ç½®å¹¶æ„å»º
cmake ..
cmake --build .

# è¿è¡Œæµ‹è¯•
ctest
```

### ç¬¬ä¸€ä¸ªç¨‹åº

åˆ›å»ºæ–‡ä»¶ `hello.cn`ï¼š

```cn
å‡½æ•° ä¸»ç¨‹åº() {
    æ‰“å°("ä½ å¥½ï¼Œä¸–ç•Œï¼\n");
    è¿”å› 0;
}
```

ç¼–è¯‘å¹¶è¿è¡Œï¼š

```powershell
# ç¼–è¯‘ä¸º C ä»£ç 
.\build\Debug\cnc.exe examples\hello_world.cn -o hello.c

# ä½¿ç”¨ C ç¼–è¯‘å™¨ç¼–è¯‘
gcc hello.c -o hello.exe

# è¿è¡Œ
.\hello.exe
```

## è¯­è¨€ç‰¹æ€§

### åŸºæœ¬è¯­æ³•

**å˜é‡å£°æ˜**ï¼š
```cn
æ•´æ•° å¹´é¾„ = 25;
å­—ç¬¦ä¸² å§“å = "å¼ ä¸‰";
å˜é‡ è‡ªåŠ¨æ¨æ–­ = 100;  // ç±»å‹æ¨æ–­
```

**å‡½æ•°å®šä¹‰**ï¼š
```cn
å‡½æ•° æ•´æ•° è®¡ç®—å’Œ(æ•´æ•° a, æ•´æ•° b) {
    è¿”å› a + b;
}
```

**æ§åˆ¶æµ**ï¼š
```cn
å¦‚æœ (å¹´é¾„ >= 18) {
    æ‰“å°("æˆå¹´äºº\n");
} å¦åˆ™ {
    æ‰“å°("æœªæˆå¹´äºº\n");
}

å½“ (è®¡æ•° < 10) {
    è®¡æ•° = è®¡æ•° + 1;
}
```

**æ•°ç»„æ“ä½œ**ï¼š
```cn
æ•°ç»„ æ•°å­—åˆ—è¡¨ = [1, 2, 3, 4, 5];
æ•´æ•° é•¿åº¦ = æ•°å­—åˆ—è¡¨.é•¿åº¦();
æ•°å­—åˆ—è¡¨[0] = 10;
```

**æ¨¡å—ç³»ç»Ÿ**ï¼š
```cn
æ¨¡å— æ•°å­¦å·¥å…·;

å¯¼å…¥ åŸºç¡€åº“;

å‡½æ•° æ•´æ•° å¹³æ–¹(æ•´æ•° x) {
    è¿”å› x * x;
}
```

## é¡¹ç›®ç»“æ„

```
CN_Language/
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ frontend/          # å‰ç«¯ï¼šè¯æ³•åˆ†æã€è¯­æ³•åˆ†æ
â”‚   â”œâ”€â”€ semantics/         # è¯­ä¹‰åˆ†æã€ç¬¦å·è¡¨
â”‚   â”œâ”€â”€ ir/               # ä¸­é—´è¡¨ç¤º
â”‚   â”œâ”€â”€ backend/          # åç«¯ï¼šC ä»£ç ç”Ÿæˆ
â”‚   â”œâ”€â”€ runtime/          # è¿è¡Œæ—¶åº“
â”‚   â”œâ”€â”€ support/          # å·¥å…·æ”¯æŒæ¨¡å—
â”‚   â””â”€â”€ cli/              # å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ include/              # å¤´æ–‡ä»¶
â”œâ”€â”€ tests/                # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/            # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/     # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ system/          # ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ examples/             # ç¤ºä¾‹ç¨‹åº
â”œâ”€â”€ docs/                # æ–‡æ¡£
â”‚   â”œâ”€â”€ design/          # è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ specifications/  # è§„èŒƒæ–‡æ¡£
â”‚   â””â”€â”€ implementation-plans/  # å®æ–½è®¡åˆ’
â””â”€â”€ CMakeLists.txt       # æ„å»ºé…ç½®
```

## å·¥å…·é“¾

### cnc - ç¼–è¯‘å™¨
ä¸»ç¼–è¯‘å™¨ï¼Œå°† CN_Language æºä»£ç ç¼–è¯‘ä¸º C ä»£ç ï¼š

```powershell
cnc input.cn -o output.c
```

### cnrepl - äº¤äº’å¼è§£é‡Šå™¨
å¿«é€Ÿè¯•éªŒä»£ç ç‰‡æ®µï¼š

```powershell
cnrepl
> å˜é‡ x = 10;
> æ‰“å°(x * 2);
20
```

### cnfmt - ä»£ç æ ¼å¼åŒ–å·¥å…·
è‡ªåŠ¨æ ¼å¼åŒ–æºä»£ç ï¼š

```powershell
cnfmt input.cn
```

## å¼€å‘è·¯çº¿å›¾

é¡¹ç›®é‡‡ç”¨åˆ†é˜¶æ®µè¿­ä»£å¼€å‘æ¨¡å¼ï¼š

- âœ… **é˜¶æ®µ 0**ï¼šé¡¹ç›®åˆå§‹åŒ–ä¸è§„èŒƒå®Œå–„
- âœ… **é˜¶æ®µ 1**ï¼šå‰ç«¯åŸºç¡€ï¼ˆè¯æ³•/è¯­æ³•åˆ†æï¼‰
- âœ… **é˜¶æ®µ 2**ï¼šè¯­ä¹‰åˆ†æä¸åŸºç¡€ç±»å‹ç³»ç»Ÿ
- âœ… **é˜¶æ®µ 3**ï¼šIR è®¾è®¡ä¸ C åç«¯åˆç‰ˆ
- âœ… **é˜¶æ®µ 4**ï¼šæœ€å°è¿è¡Œæ—¶ä¸åŸºç¡€æ ‡å‡†åº“
- âœ… **é˜¶æ®µ 5**ï¼šOS å¼€å‘æ”¯æŒä¸ freestanding æ¨¡å¼
- âœ… **é˜¶æ®µ 6**ï¼šå·¥å…·é“¾ä¸ç”Ÿæ€ï¼ˆREPL/æ ¼å¼åŒ–/æ£€æŸ¥å™¨ï¼‰
- âœ… **é˜¶æ®µ 7**ï¼šæ€§èƒ½ä¼˜åŒ–ã€ç¨³å®šç‰ˆä¸é•¿æœŸæ¼”è¿›
- ğŸ“… **é˜¶æ®µ 8**ï¼šæ ¸å¿ƒè¯­æ³•æ‰©å±•ä¸ç³»ç»Ÿç¼–ç¨‹èƒ½åŠ›ï¼ˆæ“ä½œç³»ç»Ÿå¼€å‘å°±ç»ªï¼‰

è¯¦è§ [å¼€å‘è®¡åˆ’](docs/design/CN_Language%20å¼€å‘è®¡åˆ’.md)ã€‚

## æ–‡æ¡£

- [è¯­è¨€è§„èŒƒè‰æ¡ˆ](docs/specifications/CN_Language%20è¯­è¨€è§„èŒƒè‰æ¡ˆï¼ˆæ ¸å¿ƒå­é›†ï¼‰.md) - è¯­è¨€è¯­æ³•å’Œè¯­ä¹‰å®šä¹‰
- [C ä»£ç é£æ ¼è§„èŒƒ](docs/specifications/CN_Language%20C%20ä»£ç é£æ ¼è§„èŒƒ.md) - å®ç°ä»£ç è§„èŒƒ
- [æµ‹è¯•è§„èŒƒ](docs/specifications/CN_Language%20æµ‹è¯•è§„èŒƒ.md) - æµ‹è¯•ç»„ç»‡ä¸ç¼–å†™è§„èŒƒ
- [ç¼–è¯‘å™¨æ¶æ„è®¾è®¡](docs/design/CN_Language%20ç¼–è¯‘å™¨%20å·¥å…·é“¾æ¶æ„è®¾è®¡.md) - ç³»ç»Ÿæ¶æ„æ–‡æ¡£
- [è¿è¡Œæ—¶ç»‘å®šè§„èŒƒ](docs/specifications/CN_Language%20è¿è¡Œæ—¶ç»‘å®šè§„èŒƒ.md) - è¿è¡Œæ—¶æ¥å£è§„èŒƒ

## ç¤ºä¾‹ç¨‹åº

æŸ¥çœ‹ [examples/](examples/) ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ï¼š

- [hello_world.cn](examples/hello_world.cn) - Hello World
- [arithmetic_compile.cn](examples/arithmetic_compile.cn) - ç®—æœ¯è¿ç®—
- [array_examples.cn](examples/array_examples.cn) - æ•°ç»„æ“ä½œ
- [function_examples.cn](examples/function_examples.cn) - å‡½æ•°å®šä¹‰ä¸è°ƒç”¨
- [control_flow_compile.cn](examples/control_flow_compile.cn) - æ§åˆ¶æµ
- [freestanding_example.cn](examples/freestanding_example.cn) - Freestanding æ¨¡å¼

## è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼åœ¨æäº¤ä»£ç å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. éµå¾ª [C ä»£ç é£æ ¼è§„èŒƒ](docs/specifications/CN_Language%20C%20ä»£ç é£æ ¼è§„èŒƒ.md)
2. æ¯ä¸ª `.c` æ–‡ä»¶ä¸è¶…è¿‡ 500 è¡Œï¼Œæ¯ä¸ªå‡½æ•°ä¸è¶…è¿‡ 50 è¡Œ
3. ä¸ºæ–°åŠŸèƒ½æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
4. é€šè¿‡æ‰€æœ‰ç°æœ‰æµ‹è¯•ï¼š`ctest`
5. æ›´æ–°ç›¸å…³æ–‡æ¡£

## è¿è¡Œæµ‹è¯•

```powershell
# è¿›å…¥æ„å»ºç›®å½•
cd build

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
ctest

# è¿è¡Œç‰¹å®šæµ‹è¯•
ctest -R lexer_test
ctest -R integration

# è¯¦ç»†è¾“å‡º
ctest --output-on-failure
```

## OS å¼€å‘æ”¯æŒ

CN_Language ç‰¹åˆ«é€‚åˆæ“ä½œç³»ç»Ÿå¼€å‘ï¼š

**Freestanding æ¨¡å¼**ï¼š
```powershell
cnc --target x86_64-elf --freestanding kernel.cn -o kernel.c
```

**ç‰¹æ€§**ï¼š
- æ— æ ‡å‡†åº“ä¾èµ–
- è‡ªå®šä¹‰å†…å­˜åˆ†é…å™¨
- ç›´æ¥ç¡¬ä»¶è®¿é—®
- ä¸å¯åŠ¨ä»£ç /é“¾æ¥è„šæœ¬é›†æˆ

æŸ¥çœ‹ [OS å¼€å‘ç¤ºä¾‹](tests/integration/os/) äº†è§£æ›´å¤šã€‚

## å¤šå¹³å°éªŒè¯

CN_Language æ”¯æŒå¤šå¹³å°æ„å»ºä¸è¿è¡ŒéªŒè¯ï¼Œç¡®ä¿åœ¨ä¸åŒæ“ä½œç³»ç»Ÿå’Œæ¶æ„ä¸Šçš„è¡Œä¸ºä¸€è‡´æ€§ã€‚

### æ”¯æŒçš„å¹³å°

| å¹³å° | æ¶æ„ | ç¼–è¯‘å™¨ | çŠ¶æ€ |
|------|------|--------|------|
| Windows | x86_64 | MSVC/GCC/Clang | âœ… å·²éªŒè¯ |
| Linux | x86_64 | GCC/Clang | âœ… å·²éªŒè¯ |
| Linux | aarch64 | GCC/Clang | âœ… å·²éªŒè¯ |
| Freestanding | x86_64 | GCC/Clang | âœ… å·²éªŒè¯ |

### å¿«é€ŸéªŒè¯

**Windows**:
```powershell
.\tools\multiplatform_test.ps1 -CleanBuild
```

**Linux**:
```bash
chmod +x tools/multiplatform_test.sh
./tools/multiplatform_test.sh
```

**Docker**:
```bash
docker-compose run cn-lang-dev
./tools/multiplatform_test.sh
```

éªŒè¯è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œï¼š
- âœ“ ä¾èµ–å·¥å…·æ£€æŸ¥
- âœ“ CMake é…ç½®ä¸æ„å»º
- âœ“ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- âœ“ æ ¸å¿ƒåŠŸèƒ½éªŒè¯
- âœ“ ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š

æŸ¥çœ‹ [å¤šå¹³å°æ„å»ºä¸è¿è¡ŒéªŒè¯æŒ‡å—](docs/implementation-plans/é˜¶æ®µ%207ï¼šæ€§èƒ½ä¼˜åŒ–ã€ç¨³å®šç‰ˆä¸é•¿æœŸæ¼”è¿›/å¤šå¹³å°æ„å»ºä¸è¿è¡ŒéªŒè¯æŒ‡å—.md) äº†è§£æ›´å¤šã€‚

## æŠ€æœ¯æ ˆ

- **å®ç°è¯­è¨€**ï¼šC (C11 æ ‡å‡†)
- **æ„å»ºç³»ç»Ÿ**ï¼šCMake
- **æµ‹è¯•æ¡†æ¶**ï¼šè‡ªç ”è½»é‡æµ‹è¯•æ¡†æ¶ + CTest
- **ç›®æ ‡å¹³å°**ï¼šWindows, Linux, macOS
- **æ¶æ„æ”¯æŒ**ï¼šx86_64, ARM64

## è®¸å¯è¯

[MIT License](LICENSE)

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºä¸­æ–‡ç¼–ç¨‹è¯­è¨€ç”Ÿæ€åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç ”ç©¶è€…ã€‚

## è”ç³»æ–¹å¼

- é—®é¢˜åé¦ˆï¼š[GitHub Issues](https://github.com/your-username/CN_Language/issues)
- è®¨è®ºäº¤æµï¼š[GitHub Discussions](https://github.com/your-username/CN_Language/discussions)

---

**æ³¨**ï¼šé¡¹ç›®å½“å‰å¤„äºæ´»è·ƒå¼€å‘é˜¶æ®µï¼ŒAPI å’Œè¯­æ³•å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚
