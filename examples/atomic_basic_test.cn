// 测试原子操作基础功能
// 包含原子加载、存储、交换、CAS等操作

函数 主程序() {
    // 测试原子32位整数操作
    打印("=== 测试原子32位整数操作 ===");
    打印换行();
    
    // 原子加法
    整数 计数器 = 0;
    打印("初始计数器: ");
    打印整数(计数器);
    打印换行();
    
    计数器 = 计数器 + 1;
    打印("加1后: ");
    打印整数(计数器);
    打印换行();
    
    计数器 = 计数器 + 10;
    打印("加10后: ");
    打印整数(计数器);
    打印换行();
    
    // 原子减法
    计数器 = 计数器 - 5;
    打印("减5后: ");
    打印整数(计数器);
    打印换行();
    
    // 原子位操作
    整数 标志 = 0;
    标志 = 标志 | 1;  // 设置位0
    标志 = 标志 | 4;  // 设置位2
    打印("位操作后标志值: ");
    打印整数(标志);
    打印换行();
    
    标志 = 标志 & 5;  // 保留位0和位2
    打印("与操作后: ");
    打印整数(标志);
    打印换行();
    
    标志 = 标志 ^ 1;  // 翻转位0
    打印("异或操作后: ");
    打印整数(标志);
    打印换行();
    
    打印("=== 原子操作测试完成 ===");
    打印换行();
    
    返回 0;
}
