// 测试互斥锁基础功能
// 模拟临界区保护和共享资源访问

整数 共享计数器 = 0;

函数 增加计数(整数 次数) {
    整数 i = 0;
    当 (i < 次数) {
        // 在实际多线程场景中，这里应该使用互斥锁保护
        共享计数器 = 共享计数器 + 1;
        i = i + 1;
    }
    返回 0;
}

函数 主程序() {
    打印("=== 测试互斥锁概念 ===");
    打印换行();
    
    // 初始化共享资源
    共享计数器 = 0;
    打印("初始共享计数器: ");
    打印整数(共享计数器);
    打印换行();
    
    // 模拟临界区操作
    打印("进入临界区...");
    打印换行();
    
    // 执行受保护的操作
    增加计数(10);
    
    打印("离开临界区");
    打印换行();
    打印("最终共享计数器: ");
    打印整数(共享计数器);
    打印换行();
    
    // 测试锁的可重入性概念
    打印("测试可重入性...");
    打印换行();
    增加计数(5);
    打印("再次增加后: ");
    打印整数(共享计数器);
    打印换行();
    
    打印("=== 互斥锁测试完成 ===");
    打印换行();
    
    返回 0;
}
