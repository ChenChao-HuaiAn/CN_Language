
我已完成 **阶段 3 TODO 列表** 中关于 **IR 打印工具** 的实现。

### 已完成的工作：

1.  **定义打印接口**：在 `include/cnlang/ir/ir.h` 中增加了 `cn_ir_dump_module`、`cn_ir_dump_function`、`cn_ir_dump_block` 等系列函数，支持对 IR 各个层级的可视化输出。
2.  **实现打印逻辑**：在 `src/ir/core/ir.c` 中实现了具体的 dump 逻辑：
    *   **操作数格式化**：虚拟寄存器（`%r0`）、全局符号（`@name`）、立即数、标签等。
    *   **指令格式化**：支持二元运算（`%r1 = add %r0, 1`）、赋值、内存操作（`store %r0, @var`）、控制流（`jump label`、`branch cond, true, false`）、函数调用（`%r1 = call @func(%r0)`）及返回。
    *   **结构化输出**：按照函数 -> 基本块 -> 指令的层级进行缩进打印，便于调试 `AST -> IR` 的生成结果。

### 更新后的 TODO 状态：

```markdown
#### 1.3 实现 IR 数据结构 (`src/ir/`)
- [x] **目录初始化**：创建 `src/ir/core/` 目录。
- [x] **指令结构体定义**：在 `include/cnlang/ir/ir.h` 中定义 `CnIrInst`。
- [x] **操作数定义**：定义 `CnIrOperand`。
- [x] **IR 打印工具**：实现将 IR 序列化为文本的函数（如 `cn_ir_dump`）。
```

**下一步建议**：
既然 IR 的基础设施（数据结构、CFG、打印工具）已全部就绪，我们可以正式开始 **阶段 3 的核心任务：AST 到 IR 的转换 (Lowering)**。