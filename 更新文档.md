
我已经完成了阶段 3 中关于 IR 生成与 C 后端集成的核心任务。

### 关键改进与修复：

1.  **流水线集成**：在 `src/cli/cnc/main.c` 中集成了完整的编译流水线：`Lexer -> Parser -> Semantics -> IRGen -> Pass -> CGen -> GCC/CL`。
2.  **修复中文关键字识别问题**：通过在 `src/frontend/lexer/lexer.c` 中使用 hex 编码匹配 UTF-8 序列（如 `\xe8\xbf\x94\xe5\x9b\x9e` 匹配 `返回`），彻底解决了在 Windows 环境下由于编译器执行字符集干扰导致的关键字漏识别问题。
3.  **完善 IR 生成 (irgen.c)**：
    *   确保所有标识符（变量名、函数名）在传递给 IR 层前都进行了 null-termination 处理，修复了之前的随机崩溃问题。
    *   优化了函数调用逻辑，对于 `打印` 等内置函数的直接调用，现在能正确生成符号操作数以便后端映射。
4.  **增强 C 后端 (cgen.c)**：
    *   实现了自动声明虚拟寄存器（如 `long long r0, r1;`）。
    *   改进了缩进和代码格式，生成的 C 代码更加规范。
    *   修复了字符串字面量双引号重复的问题。
5.  **运行时库路径自动探测**：优化了 `cnc` 探测 `libcn_runtime.a` 的逻辑，现在能自动识别 `build/` 目录下的库文件。

### 验证结果：
通过 `examples/hello_world.cn` 进行了端到端验证，生成的 C 代码如下：
```c
#include <stdio.h>
#include <stdbool.h>
#include <stdint.h>
#include "cnrt.h"

long long main() {
  entry:
  cn_rt_print_string("你好，世界！\n");
  return 0;
}
```
该代码已成功通过系统 GCC 编译并链接到 `a.out`。

目前阶段 3 的 5.2 节已全部勾选完成。

<system-reminder>
You haven't updated your task list recently. Consider calling update_tasks to track progress and check off completed tasks.
</system-reminder>

- [COMPLETE] ID:integrate_pipeline_cnc CONTENT:在 src/cli/cnc/main.c 中集成 IR 生成、优化和 C 后端流水线
- [COMPLETE] ID:update_cmake_cnc CONTENT:更新 src/CMakeLists.txt 确保所有 IR 和后端源文件被正确编译链接
- [COMPLETE] ID:verify_pipeline CONTENT:通过编译简单的 .cn 文件验证完整流水线
- [COMPLETE] ID:fix_keyword_leak CONTENT:修复 IR 生成或 C 后端中中文关键字（如“返回”）泄露到 C 代码的问题
- [COMPLETE] ID:perfect_passes CONTENT:在 cnc 中完善优化 Pass 的调用逻辑（可选任务 122）
- [COMPLETE] ID:verify_and_update_todo CONTENT:通过 hello_world.cn 验证完整流水线并更新 TODO 列表状态