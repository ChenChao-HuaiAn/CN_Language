
我已完成 `阶段 2：语义分析与基础类型系统 TODO 列表.md` 中第 79-92 行关于错误报告与 diagnostics 集成的任务。

### 完成的工作：

1.  **扩展 `CnDiagCode` 枚举**：
    在 [diagnostics.h](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/include/cnlang/support/diagnostics.h) 中增加了更多的语义错误代码，包括：
    - `CN_DIAG_CODE_SEM_MISSING_RETURN` (缺少返回)
    - `CN_DIAG_CODE_SEM_INVALID_ASSIGNMENT` (无效赋值)
    - `CN_DIAG_CODE_SEM_NOT_CALLABLE` (不可调用)
    - `CN_DIAG_CODE_SEM_NOT_STRUCT` (非结构体)
    - `CN_DIAG_CODE_SEM_MEMBER_NOT_FOUND` (成员未找到)

2.  **定义语义分析专用诊断接口**：
    在 [diagnostics.h](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/include/cnlang/support/diagnostics.h) 中声明了一组面向语义分析的报错函数，并在 [diagnostics.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/src/support/diagnostics/diagnostics.c) 中进行了实现：
    - `cn_support_diag_semantic_error_duplicate_symbol`：报告符号重复定义。
    - `cn_support_diag_semantic_error_undefined_identifier`：报告未定义标识符。
    - `cn_support_diag_semantic_error_type_mismatch`：报告类型不匹配。
    - `cn_support_diag_semantic_error_missing_return`：报告缺少返回语句。
    - `cn_support_diag_semantic_error_generic`：用于报告其他特定的语义错误。

3.  **集成到语义分析流程**：
    更新了 [semantic_passes.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/src/semantics/checker/semantic_passes.c) 和 [scope_builder.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/src/semantics/resolution/scope_builder.c)，将原有的 `cn_support_diagnostics_report_error` 调用替换为更具体的语义报错接口。这使得语义分析过程中的错误报告更加规范，不再直接使用硬编码的字符串。

### 验证情况：
- 已通过 `cmake --build build` 验证，项目编译正常，所有相关模块（前端、语义、测试）均已成功重新构建。

---
**TODO 状态更新**：
- [x] 在 diagnostics 模块中定义语义错误专用接口/枚举
- [x] 在语义分析中通过 diagnostics 上报错误