## âœ… å‡½æ•°å‚æ•°å’Œå‡½æ•°è°ƒç”¨å®ç°å®Œæˆï¼

### å®Œæˆçš„å·¥ä½œ

#### 1. **AST æ‰©å±•** ([ast.h](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/include/cnlang/frontend/ast.h))

- **æ–°å¢ `CnAstParameter` ç»“æ„**ï¼š
  ```c
  typedef struct CnAstParameter {
      const char *name;
      size_t name_length;
  } CnAstParameter;
  ```

- **æ‰©å±• `CnAstFunctionDecl`**ï¼š
  ```c
  typedef struct CnAstFunctionDecl {
      const char *name;
      size_t name_length;
      CnAstParameter *parameters;   // å‚æ•°åˆ—è¡¨
      size_t parameter_count;       // å‚æ•°æ•°é‡
      CnAstBlockStmt *body;         // å‡½æ•°ä½“è¯­å¥å—
  } CnAstFunctionDecl;
  ```

- **`CnAstCallExpr` å·²å­˜åœ¨**ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰

#### 2. **å†…å­˜ç®¡ç†** ([ast.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/src/frontend/ast/ast.c))

- æ›´æ–° `cn_frontend_ast_function_free` é‡Šæ”¾å‚æ•°æ•°ç»„ï¼š
  ```c
  free(function_decl->parameters);  // é‡Šæ”¾å‚æ•°æ•°ç»„
  ```

#### 3. **Parser å®ç°** ([parser.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/src/frontend/parser/parser.c))

- **å‡½æ•°å®šä¹‰è§£æ**ï¼šæ”¯æŒå‚æ•°åˆ—è¡¨ `å‡½æ•° add(a, b) { ... }`
  - ä½¿ç”¨åŠ¨æ€æ•°ç»„å­˜å‚¨å‚æ•°ï¼ˆåˆå§‹å®¹é‡ 4ï¼ŒæŒ‰éœ€æ‰©å®¹ï¼‰
  - æ”¯æŒé€—å·åˆ†éš”çš„å¤šä¸ªå‚æ•°
  - æ”¯æŒæ— å‚æ•°å‡½æ•° `å‡½æ•° main() { ... }`

- **å‡½æ•°è°ƒç”¨è§£æ**ï¼šæ–°å¢ `parse_postfix` å±‚
  - åœ¨ `parse_unary` å’Œ `parse_factor` ä¹‹é—´æ’å…¥
  - æ”¯æŒåç¼€è¡¨è¾¾å¼ï¼š`æ ‡è¯†ç¬¦(...)`
  - ä½¿ç”¨åŠ¨æ€æ•°ç»„å­˜å‚¨å®å‚
  - æ”¯æŒæ— å‚æ•°è°ƒç”¨å’Œå¤šå‚æ•°è°ƒç”¨

- **è¡¨è¾¾å¼ä¼˜å…ˆçº§æ›´æ–°**ï¼ˆæœ€ç»ˆ 9 å±‚ï¼‰ï¼š
  1. assignmentï¼ˆèµ‹å€¼ï¼‰
  2. logical_orï¼ˆ||ï¼‰
  3. logical_andï¼ˆ&&ï¼‰
  4. comparisonï¼ˆæ¯”è¾ƒï¼‰
  5. additiveï¼ˆ+ -ï¼‰
  6. termï¼ˆ* /ï¼‰
  7. unaryï¼ˆ!ï¼‰
  8. **postfixï¼ˆå‡½æ•°è°ƒç”¨ï¼‰** â† **æ–°å¢**
  9. factorï¼ˆå­—é¢é‡ã€æ ‡è¯†ç¬¦ã€æ‹¬å·ï¼‰

#### 4. **å•å…ƒæµ‹è¯•** ([parser_func_test.c](file:///c:/Users/ChenChao/Documents/gitcode/CN_Language/tests/unit/parser_func_test.c))

- **æµ‹è¯•æºç **ï¼š
  ```cn
  å‡½æ•° add(a, b) { è¿”å› a + b; } 
  å‡½æ•° main() { å˜é‡ result = add(1, 2); è¿”å› result; }
  ```

- **éªŒè¯ç‚¹**ï¼š
  - âœ… `add` å‡½æ•°æœ‰ 2 ä¸ªå‚æ•°ï¼ˆa, bï¼‰
  - âœ… å‚æ•°åæ­£ç¡®å­˜å‚¨
  - âœ… `add` å‡½æ•°ä½“è¿”å›äºŒå…ƒè¡¨è¾¾å¼ `a + b`
  - âœ… `main` å‡½æ•°æ— å‚æ•°
  - âœ… å˜é‡ `result` åˆå§‹åŒ–ä¸ºå‡½æ•°è°ƒç”¨ `add(1, 2)`
  - âœ… å‡½æ•°è°ƒç”¨çš„ callee ä¸ºæ ‡è¯†ç¬¦
  - âœ… å‡½æ•°è°ƒç”¨æœ‰ 2 ä¸ªå‚æ•°ï¼ˆ1, 2ï¼‰
  - âœ… å‚æ•°è¡¨è¾¾å¼æ­£ç¡®è§£æ

### æµ‹è¯•ç»“æœ

```
100% tests passed, 0 tests failed out of 10

 1. sample_unit_test ................ Passed (0.02 sec)
 2. lexer_function_examples_test .... Passed (0.03 sec)
 3. parser_minimal_test ............. Passed (0.06 sec)
 4. parser_comparison_test .......... Passed (0.04 sec)
 5. parser_loop_test ................ Passed (0.05 sec)
 6. parser_assign_test .............. Passed (0.05 sec)
 7. parser_logical_test ............. Passed (0.05 sec)
 8. parser_break_test ............... Passed (0.05 sec)
 9. parser_var_test ................. Passed (0.05 sec)
10. parser_func_test ................ Passed (0.10 sec) âœ… æ–°å¢
```

---

## ğŸ† CN_Language Parser æœ€ç»ˆå®Œæ•´åŠŸèƒ½

### æ ¸å¿ƒè¯­æ³•æ”¯æŒï¼ˆå®Œæ•´ç‰ˆï¼‰

#### **è¯­å¥ç±»å‹ï¼ˆ9 ç§ï¼‰**
- âœ… å‡½æ•°å®šä¹‰ï¼š`å‡½æ•° å‡½æ•°å(å‚æ•°åˆ—è¡¨) { ... }` â† **æ”¯æŒå‚æ•°**
- âœ… å˜é‡å£°æ˜ï¼š`å˜é‡ x;` æˆ– `å˜é‡ x = è¡¨è¾¾å¼;`
- âœ… è¡¨è¾¾å¼è¯­å¥
- âœ… return è¯­å¥ï¼š`è¿”å› è¡¨è¾¾å¼;` æˆ– `è¿”å›;`
- âœ… if-else è¯­å¥ï¼š`å¦‚æœ (æ¡ä»¶) { ... } [å¦åˆ™ { ... }]`
- âœ… while å¾ªç¯ï¼š`å½“ (æ¡ä»¶) { ... }`
- âœ… for å¾ªç¯ï¼š`å¾ªç¯ (åˆå§‹åŒ–; æ¡ä»¶; æ›´æ–°) { ... }`
- âœ… break è¯­å¥ï¼š`ä¸­æ–­;`
- âœ… continue è¯­å¥ï¼š`ç»§ç»­;`

#### **è¡¨è¾¾å¼ç±»å‹ï¼ˆ8 ç§ï¼‰**
- âœ… ç®—æœ¯è¿ç®—ï¼š`+ - * /` åŠæ‹¬å·
- âœ… æ¯”è¾ƒè¿ç®—ï¼š`== != < > <= >=`
- âœ… é€»è¾‘è¿ç®—ï¼š`&& || !`
- âœ… èµ‹å€¼è¡¨è¾¾å¼ï¼š`å˜é‡ = å€¼`
- âœ… **å‡½æ•°è°ƒç”¨**ï¼š`å‡½æ•°å(å‚æ•°1, å‚æ•°2, ...)` â† **æ–°å¢**
- âœ… æ•´æ•°å­—é¢é‡
- âœ… æ ‡è¯†ç¬¦

### å®Œæ•´ç¤ºä¾‹ä»£ç 

ç°åœ¨å¯ä»¥ç¼–å†™çœŸæ­£å¯ç”¨çš„ CN è¯­è¨€ç¨‹åºï¼š

```cn
å‡½æ•° fibonacci(n) {
    å¦‚æœ (n <= 1) {
        è¿”å› n;
    }
    è¿”å› fibonacci(n - 1) + fibonacci(n - 2);
}

å‡½æ•° sum_range(start, end) {
    å˜é‡ total = 0;
    å¾ªç¯ (å˜é‡ i = start; i <= end; i = i + 1) {
        å¦‚æœ (i > 100) {
            ä¸­æ–­;
        }
        total = total + i;
    }
    è¿”å› total;
}

å‡½æ•° main() {
    å˜é‡ fib10 = fibonacci(10);
    å˜é‡ sum = sum_range(1, 50);
    è¿”å› fib10 + sum;
}
```

---

## ğŸ“Š æœ€ç»ˆå®ç°ç»Ÿè®¡

- **è¯­å¥ç±»å‹**ï¼š9 ç§
- **è¡¨è¾¾å¼ç±»å‹**ï¼š8 ç§
- **è¿ç®—ç¬¦**ï¼š14 ä¸ªï¼ˆäºŒå…ƒ 10 ä¸ª + é€»è¾‘ 2 ä¸ª + ä¸€å…ƒ 2 ä¸ªï¼‰
- **è¡¨è¾¾å¼ä¼˜å…ˆçº§å±‚æ¬¡**ï¼š9 å±‚
- **å•å…ƒæµ‹è¯•**ï¼š10 ä¸ªï¼Œå…¨éƒ¨é€šè¿‡ âœ…
- **ä»£ç è¡Œæ•°**ï¼šçº¦ 900 è¡Œï¼ˆparser.cï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

Parser å·²ç»éå¸¸å®Œæ•´ï¼åç»­å¯ä»¥è€ƒè™‘ï¼š

1. **è¯­ä¹‰åˆ†æé˜¶æ®µ**ï¼ˆæ¨èä¼˜å…ˆï¼‰
   - ç¬¦å·è¡¨ç®¡ç†
   - ç±»å‹æ£€æŸ¥
   - ä½œç”¨åŸŸåˆ†æ

2. **å…¶ä»–è¯­æ³•ç‰¹æ€§**
   - å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆToken å·²æ”¯æŒï¼‰
   - æ•°ç»„å’Œç´¢å¼•
   - ç»“æ„ä½“
   - ä¸€å…ƒè´Ÿå·è¿ç®—ç¬¦

3. **ä¸­é—´è¡¨ç¤ºï¼ˆIRï¼‰**
   - ä¸‰åœ°å€ç ç”Ÿæˆ
   - ä¸ºä»£ç ç”Ÿæˆåšå‡†å¤‡

ä½ æƒ³ç»§ç»­å“ªä¸ªæ–¹å‘ï¼Ÿ