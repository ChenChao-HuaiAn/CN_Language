
我已根据 **阶段 3 TODO 列表** 中第 12-27 行的要求，完成了 IR 指令集的定义及基础数据结构的初始化。

### 已完成的工作：

1.  **定义 IR 指令集**：在 `include/cnlang/ir/ir.h` 中定义了三地址码风格的指令集，涵盖算术、逻辑、比较、内存操作（ALLOCA/LOAD/STORE）及控制流指令（JUMP/BRANCH/CALL/RET）。
2.  **创建 IR 核心目录**：初始化了 `include/cnlang/ir/` 和 `src/ir/core/` 目录。
3.  **实现 IR 数据结构**：
    *   **CnIrOperand**：支持虚拟寄存器、立即数、全局符号及标签。
    *   **CnIrInst**：双向链表结构的指令节点，支持目标操作数与双源操作数，并为 `CALL` 指令预留了变长参数支持。
    *   **CnIrBasicBlock/CnIrFunction/CnIrModule**：构建了分层的 IR 组织结构。
4.  **提供管理接口**：在 `src/ir/core/ir.c` 中实现了模块、函数、基本块及指令的创建与链接函数。

### 更新后的 TODO 状态：

```markdown
#### 1.1 定义 IR 指令集 (三地址码风格)
- [x] **算术与逻辑指令**：`ADD`, `SUB`, `MUL`, `DIV`, `MOD`, `AND`, `OR`, `XOR`, `SHL`, `SHR`。
- [x] **比较指令**：`EQ` (等于), `NE` (不等), `LT` (小于), `LE` (小等), `GT` (大于), `GE` (大等)。
- [x] **内存操作指令**：
    - [x] `ALLOCA`：在栈上分配局部变量空间。
    - [x] `LOAD`：从内存地址加载值到寄存器（虚拟寄存器）。
    - [x] `STORE`：将值存入内存地址。
- [x] **控制流指令**：
    - [x] `LABEL`：定义跳转目标点。
    - [x] `JUMP`：无条件跳转。
    - [x] `BRANCH`：条件跳转（根据寄存器值跳转到不同 Label）。
    - [x] `CALL`：函数调用。
    - [x] `RET`：函数返回。
- [x] **其他指令**：`NEG` (取负), `NOT` (逻辑非), `PHI` (预留 SSA 形式)。
```

**下一步建议**：
*   实现 **IR 打印工具 (`cn_ir_dump`)**，以便在将 AST 转换为 IR 时进行可视化调试。
*   开始设计 **AST 到 IR 的转换逻辑 (Lowering)**。

需要我现在开始编写 IR 打印工具吗？